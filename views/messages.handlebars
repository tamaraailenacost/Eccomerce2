<head>
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
<div>
    <h1>Cliente Websockets</h1>
    <input id="input" value="tamara" type="text"/>
    <button id="enviar">Enviar</button>
    <p></p>
</div>
</body>
<script>
const socket = io();
const input = document.querySelector('#input');
const enviar =document.querySelector('#enviar');

enviar.addEventListener('click', () => {
    const data =  {
        "message": input.value,
        "author": ""
    }
    socket.emit('sendMensaje', data);
    
})

socket.on('sendMensaje', (msjs) => {
    console.log(msjs, "servidor dice")
    const mensajesHTML = msjs
       .map(msj => `  author ${msj.author}:    Mensaje: ${msj.message}`)
        .join('<br>')
    document.querySelector('p').innerHTML = mensajesHTML;
});

</script>
</html>